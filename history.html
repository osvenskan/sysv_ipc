<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>
	<meta charset="utf-8">
	<meta name="author" content="Philip Semanchuk">
	<meta name="copyright" content="All contents &copy; 2018 Philip Semanchuk">
	<meta name="keywords" content="python sysv system v ipc semaphore shared memory message queue">

	<title>The sysv_ipc Module for SysV IPC Under Python -- Version History</title>

	<style type="text/css">
		li {
			margin-top: .67em;
			margin-bottom: .67em;
		}
	</style>
</head>

<body>

<h2>Version History</h2>

<p>This is the version history for the
<a href="http://semanchuk.com/philip/sysv_ipc/">sysv_ipc module</a>.</p>

<ul>
	<li id="v1_0_0"><strong><span id="current">Current</span> &ndash; 1.0.0 (2 Feb 2018) &ndash;</strong>
		<p>I'm bumping the version number to 1.0.0 because I now consider this feature complete.
			That doesn't mean I won't add features, but I don't feel like I need to.
		</p>

		<ul>
			<li>Added support for Python <tt>memoryview</tt> and <tt>bytearray</tt> objects to be created from a <tt>SharedMemory</tt> instance.
			</li>
			<li>Added support for building wheels.</li>
			<li>Moved source code hosting to git and <a href='https://github.com/osvenskan/sysv_ipc'>GitHub</a>.</li>
			<li>Moved the demo code into its own directory.</li>
			<li>Minor changes (slightly improved tests, a few compiler warnings fixed, PEP8 improvments, etc.)</li>
		</ul>
	</li>

	<li id="v0_7_0">0.7.0 (11 Feb 2016) &ndash;
		<p>Version 0.7.0 is finally out now that this package is 7 years old...</p>

		<ul>
			<li>Dropped compatibility with Python < 2.7.</li>

			<li>Added unit tests with almost complete coverage.</li>

			<li>Fixed a doc bug for <tt>SharedMemory.write()</tt>. On an
				attempt to write outside of the segment, the code raises
				<tt>ValueError</tt>. The documentation had incorrectly stated that
				<tt>write()</tt> would silently
				discard the data that overflowed the segment.
			</li>

			<li>Fixed a code bug in <tt>SharedMemory.write()</tt> that
				incorrectly interpreted offsets &gt; <tt>LONG_MAX</tt>.
			</li>

			<li>Fixed a code bug in <tt>SharedMemory.write()</tt> that
				didn’t always generate a <tt>ValueError</tt> for negative
				offsets.
			</li>

			<li>Fixed a doc/code bug where <tt>SharedMemory.attach()</tt> was
				documented to accept keyword arguments but did not. Now it does.
			</li>

			<li>Fixed some header bugs that prevented the code from using
				<tt>PY_SSIZE_T_CLEAN</tt>. Thanks to Tilman Koschnick for
				bringing this to my attention.
			</li>

			<li>Added doc to note that this module exposes <tt>SHM_RDONLY</tt>
				as a module-level constant.
			</li>
		</ul>
	</li>

	<li id="v0_6_8">0.6.8 (12 Sept 2014) &ndash;
		<ul>
			<li>Fixed a bug in <tt>prober.py</tt> where prober would fail
				on systems where Python's include file was not named
				<tt>pyconfig.h</tt>. (RHEL 6 is one such system.) Thanks to
				Joshua Harlow for the bug report and patch.
			</li>

			<li><i>Spasibo</i> again to Yuriy Taraday for pointing out that
				the semaphore initialization example I changed in the previous
				version was still not
				quite correct, and for suggesting something better.
			</li>
		</ul>
	</li>

	<li id="v0_6_7">0.6.7 (1 August 2014) &ndash;
		<p><i>Spasibo</i> to Yuriy Taraday for reporting some doc errors
			corrected in this version.
		</p>

		<ul>
			<li>Added KEY_MIN as a module-level constant. The documentation
				has claimed that it was available for a long time so now the
				code finally matches the documentation.
			</li>

			<li>Changed randomly generated keys to never use a value of 0.</li>

			<li>Fixed two documenation errors in the special section on
				semaphore initialization and gave long overdue credit to
				W. Richard Stevens' book for the code idea. (Any code mistakes
				are mine, not his.)
			</li>

			<li>This is the first version downloadable from PyPI.</li>
		</ul>
	</li>

	<li id="v0_6_6">0.6.6 (15 October 2013) &ndash;
		<p>Added the ability to use Semaphores in context managers.
			Thanks to Matt Ruffalo for the suggestion and patch.
		</p>
	</li>

	<li id="v0_6_5">0.6.5 (31 March 2013) &ndash;
		<p>Fixed a bug where SharedMemory.write() claimed to accept
				keyword arguments but didn't actually do so. Thanks to
				Matt Ruffalo for the bug report and patch.
		</p>
	</li>

	<li id="v0_6_4">0.6.4 (19 Dec 2012) &ndash;
		<ul>
			<li>Added a module-level <tt>attach()</tt> method based on a
				suggestion by Vladimír Včelák.
			</li>
			<li>Added the <tt>ftok()</tt> method along with dire warnings about
				its use.
			</li>
		</ul>
	</li>

	<li id="v0_6_3">0.6.3 (3 Oct 2010) &ndash;
		<ul>
			<li>Fixed a segfault in <tt>write()</tt> that occurred any time
				an offset was passed. This was introduced in v0.6.0.
				<i>Tack</i> to Johan Bernhardtson for the bug report.
			</li>
		</ul>
	</li>

	<li id="v0_6_2">0.6.2 (6 July 2010) &ndash;
		<ul>
			<li>Updated setup.py metadata to reflect Python 3 compatibility.
				No functional change.
			</li>
		</ul>
	</li>

	<li id="v0_6_1">0.6.1 (26 June 2010) &ndash;
		<ul>
			<li>Fixed a typo introduced in the previous version that caused
				unpredictable behavior (usually a segfault) if a block flag
				was passed to <tt>MessageQueue.send()</tt>. <i>Obrigado</i>
				to Álvaro Justen and Ronald Kaiser for the bug report and
				patch.
			</li>
		</ul>
	</li>

	<li id="v0_6_0">0.6.0 (20 May 2010) &ndash;
		<ul>
			<li>Added Python 3 support.</li>
			<li>Renamed a constant that caused a problem under AIX.
				Thanks to Loic Nageleisen for the bug report.
			</li>
			<li>Updated this documentation a little.</li>
		</ul>
	</li>

	<li id="v0_5_2">0.5.2 (17 Jan 2010) &ndash;
		<ul>
			<li>Fixed a bug that insisted on keys &gt; 0. Thanks to 原志
				(Daniel) for the bug report and patch.
			</li>
			<li>Fixed a bug where the module could have generated invalid
				keys on systems that typedef <tt>key_t</tt> as a
				<tt>short</tt>. I don't think such a system exists, though.
			</li>
			<li>Fixed a LICENSE file typo.</li>
			<li>Added an RSS feed to this page.</li>
		</ul>
	</li>

	<li id="v0_5_1">0.5.1 (1 Dec 2009) &ndash;
		<p>No code changes in this version.</p>
		<ul>
			<li>Fixed the comment in <tt>sysv_ipc_module.c</tt> that
				still referred to the GPL license.
			</li>
			<li>Added the attributes <tt>__version</tt>, <tt>__author__</tt>,
				<tt>__license__</tt> and <tt>__copyright__</tt>.
			</li>
			<li>Removed <tt>file()</tt> from <tt>setup.py</tt> in favor
				of <tt>open()</tt>.
			</li>
		</ul>
	</li>

	<li id="v0_5">0.5 (6 Oct 2009) &ndash;
		<p>No code changes in this version.</p>
		<ul>
			<li>Changed the license from GPL to BSD.</li>
		</ul>
	</li>

	<li id="v0_4_2">0.4.2 (22 Mar 2009) &ndash;
		<p>No code changes in this version.</p>
		<ul>
			<li>Fixed broken documentation links to youtube.</li>
			<li>Fixed the project name in the LICENSE file.</li>
		</ul>
	</li>

	<li id="v0_4_1"> 0.4.1 (12 Feb 2009) &ndash;
		<ul>
			<li>Changed status to beta.</li>
			<li>Added automatic generation of keys.</li>
			<li>Added a message queue demo.</li>
			<li>Added <tt>str()</tt> and <tt>repr()</tt> support to all
				objects.</li>
			<li>Fixed a bug in <tt>SharedMemory.write()</tt> that could cause
				a spurious error of "Attempt to write past end of memory
				segment". This bug only occurred on platforms using
				different sizes for <tt>long</tt> and <tt>int</tt>, or
				<tt>long</tt> and <tt>py_size_t</tt>
				(depending on Python version). <em>Tack</em> to Jesper
				for debug help.
			</li>
			<li>Plugged a memory leak in <tt>MessageQueue.receive()</tt>.</li>
			<li>Added a VERSION attribute to the module.</li>
		</ul>
	</li>

	<li id="v0_4">0.4 (28 Jan 2009) &ndash;
		<ul>
			<li>Added message queues.</li>
			<li>Fixed a bug where the <tt>key</tt> attribute of SharedMemory objects
				returned garbage.
			</li>
			<li>Fixed a bug where keys &gt; INT_MAX would get truncated on
				platforms where longs are bigger than ints.
			</li>
			<li>Provided decent inline documentation for object attributes
				(available via the <tt>help()</tt> command).
			</li>
			<li>Rearranged the code which was suffering growing pains.</li>
		</ul>
	</li>

	<li id="v0_3">0.3 (16 Jan 2009) &ndash;
		<p>This version features a rename of classes and errors
			(sorry about breaking the names), some modifications to
			semaphore timeouts, and many small fixes.
		</p>

		<p>A semaphore's <tt>.block</tt> flag now consistently trumps the
			timeout. When <tt>False</tt>, the timeout is irrelevant -- calls
			will never block. In prior versions, the flag was ignored
			when the timeout was non-zero.
		</p>

		<p>Also, on platforms (such as OS X) where <tt>semtimedop()</tt> is
			not supported, all timeouts are now treated as <tt>None</tt>.
			In other words, when <tt>.block</tt> is True, all calls
			wait as long as necessary.
		</p>

		<p>Other fixes &ndash;</p>

		<ul>
			<li>Fixed the poor choices I'd made for class and
				error names by removing the leading "SysV" and "SysVIpc".
			</li>
			<li>Removed dependencies on Python 2.5. The module now works
				with Python 2.4.4 and perhaps earlier versions.
			</li>
			<li>Fixed a bug where I was not following SysV semaphore semantics
				for interaction between timeouts and the block flag.
			</li>
			<li>Fixed compile problems on OpenSolaris 2008.05.</li>
			<li>Got rid of OS X compile warnings.</li>
			<li>Fixed many instances where I was making potentially lossy
				conversions between Python values and Unix-specific
				types like <tt>key_t</tt>, <tt>pid_t</tt>, etc.
			</li>
			<li>Fixed a bug in the SharedMemory <tt>attach()</tt> function
				 that would set an error string but not return an error
				 value if the passed address was not <tt>None</tt> or a long.
			</li>
			<li>Simplified the code a little.</li>
			<li>Restricted the semaphore <tt>acquire()</tt> and
				<tt>release()</tt> delta to be between SHORT_MIN and
				SHORT_MAX since
				<a href="http://opengroup.org/onlinepubs/007908775/xsh/semop.html">it
					is a short in the SUSv2 spec</a>.
			</li>
			<li>Fixed a bug where calling <tt>acquire()</tt> or
				<tt>release()</tt> with a delta of <tt>0</tt> would call
				<tt>.Z()</tt> instead.
			</li>
			<li>Disallowed byte counts ≤ <tt>0</tt> in
				<tt>SharedMemory.read()</tt>
			</li>
			<li>Fixed a bug in the <tt>SharedMemory</tt> init code that
				could, under vanishingly rare circumstances, return failure
				without setting the error code.
			</li>
			<li>Removed some dead code relating to the <tt>.seq</tt> member
				of the <tt>sem_perm</tt> and <tt>shm_perm</tt> structs.
			</li>
			<li>Stopped accessing the non-standard <tt>key</tt>
				(a.k.a. <tt>_key</tt> and <tt>__key</tt>) element of the
				<tt>ipc_perm</tt> struct.
			</li>
			<li>Added code to ensure the module doesn't try to create
				a string that's larger than Python permits when reading
				from shared memory.
			</li>
		</ul>
	</li>

	<li>0.2.1 (3 Jan 2009) &ndash;
		<ul>
			<li>Fixed a bug that prevented the module-specific
				errors (<tt>ExistentialError</tt>, etc.) from
				being visible in the module.
			</li>
			<li>Fixed a bug that re-initialized shared memory with
				the init character when only <tt>IPC_CREAT</tt> was specified
				and an existing segment was opened.
			</li>
			<li>Fixed a bug that always defaulted the size of a shared
				memory segment to <tt>PAGE_SIZE</tt>. Updated code and
				documentation to use intelligent defaults. <em>Tack</em> to
				Jesper for the bug report.
			</li>
			<li>Several cosmetic changes. (Added more metadata to setup.py,
				added a newline to the end of probe_results.h to avoid
				compiler complaints, etc.)
			</li>
		</ul>
	</li>

	<li>0.2 (16 Dec 2008) &ndash;
		Lots of small fixes.

		<ul>
			<li>Fixed a bug where calling <tt>shm.remove()</tt> on shared
			   memory that was already removed would cause a SystemError.
			   (I wasn't setting the Python error before returning.)
			</li>

			<li>Fixed a couple of bugs that would cause the creation
				of a new, read-only shared memory segment to fail.
			</li>

			<li>Fixed a bug that would cause the creation
				of a new, read-only semaphore to fail.
			</li>

			<li>Added the constant <tt>IPC_CREX</tt>.</li>

			<li>Renamed (sorry) <tt>MAX_KEY</tt> to <tt>KEY_MAX</tt> and
				<tt>MAX_SEMAPHORE_VALUE</tt> to <tt>SEMAPHORE_VALUE_MAX</tt>
				to be consistent with the C naming convention in limits.h.
			</li>

			<li>Hardcoded <tt>SEMAPHORE_VALUE_MAX</tt> to 32767 until I can
				find a reliable way to determine it at install time.
			</li>

			<li>Changed prober.py to write out a C header file with
				platform-specific definitions in it.
			</li>

			<li>Replaced OSError in shared memory functions with custom
				errors from this module.
			</li>

			<li>Added code to raise a ValueError when an attempt is made
				to assign an out-of-range value to a semaphore.
			</li>

			<li>Added code to raise a ValueError when an out-of-range key
				is passed to a constructor.
			</li>

			<li>Fixed a bug in the demo program conclusion.c that caused
				some informational messages to be printed twice.
			</li>

			<li>Fixed some documentation bugs.</li>
		</ul>
	</li>
	<li>0.1 (4 Dec 2008) &ndash; Original (alpha) version.</li>
</ul>

</body>
</html>
